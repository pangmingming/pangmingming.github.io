(function(e){function t(t){for(var r,i,o=t[0],l=t[1],c=t[2],d=0,m=[];d<o.length;d++)i=o[d],Object.prototype.hasOwnProperty.call(n,i)&&n[i]&&m.push(n[i][0]),n[i]=0;for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(e[r]=l[r]);u&&u(t);while(m.length)m.shift()();return s.push.apply(s,c||[]),a()}function a(){for(var e,t=0;t<s.length;t++){for(var a=s[t],r=!0,o=1;o<a.length;o++){var l=a[o];0!==n[l]&&(r=!1)}r&&(s.splice(t--,1),e=i(i.s=a[0]))}return e}var r={},n={app:0},s=[];function i(t){if(r[t])return r[t].exports;var a=r[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=e,i.c=r,i.d=function(e,t,a){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(a,r,function(t){return e[t]}.bind(null,r));return a},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=t,o=o.slice();for(var c=0;c<o.length;c++)t(o[c]);var u=l;s.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"06ea":function(e,t,a){"use strict";var r=a("8421"),n=a.n(r);n.a},"1a42":function(e,t,a){},"1f5b":function(e,t,a){"use strict";var r=a("a3b0"),n=a.n(r);n.a},"23c4":function(e,t,a){"use strict";var r=a("d68e"),n=a.n(r);n.a},4016:function(e,t,a){"use strict";var r=a("895d"),n=a.n(r);n.a},5685:function(e,t,a){"use strict";var r=a("d532"),n=a.n(r);n.a},"56d7":function(e,t,a){"use strict";a.r(t);a("d3b7"),a("e260"),a("e6cf"),a("cca6"),a("a79d");var r=a("2b0e"),n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("router-view")],1)},s=[],i={name:"app"},o=i,l=a("2877"),c=Object(l["a"])(o,n,s,!1,null,null,null),u=c.exports,d=a("8c4f"),m=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"login-container"},[a("div",{staticClass:"login-box"},[e._m(0),a("el-form",{ref:"loginFormRef",staticClass:"login-form",attrs:{model:e.loginForm,rules:e.loginFormRules}},[a("el-form-item",{attrs:{prop:"username"}},[a("el-input",{attrs:{"prefix-icon":"iconfont icon-user"},model:{value:e.loginForm.username,callback:function(t){e.$set(e.loginForm,"username","string"===typeof t?t.trim():t)},expression:"loginForm.username"}})],1),a("el-form-item",{attrs:{prop:"password"}},[a("el-input",{attrs:{"show-password":"","prefix-icon":"iconfont icon-3702mima"},model:{value:e.loginForm.password,callback:function(t){e.$set(e.loginForm,"password",t)},expression:"loginForm.password"}})],1),a("el-form-item",{staticClass:"btns"},[a("el-button",{attrs:{type:"primary"},on:{click:e.login}},[e._v("登录")]),a("el-button",{attrs:{type:"info"},on:{click:e.resetLoginForm}},[e._v("重置")])],1)],1)],1)])},p=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"avatar-box"},[r("img",{attrs:{src:a("cf05"),alt:""}})])}],g=(a("96cf"),a("1da1")),f={name:"Login",data:function(){return{loginForm:{username:"admin",password:"123456"},loginFormRules:{username:[{required:!0,message:"请输入用户名称",trigger:"blur"},{min:5,max:10,message:"长度在 5 到 10 个字符",trigger:"blur"}],password:[{required:!0,message:"请输入用户密码",trigger:"blur"},{min:6,max:15,message:"请输入正确的密码",trigger:"blur"}]}}},methods:{resetLoginForm:function(){this.$refs.loginFormRef.resetFields()},login:function(){var e=this;this.$refs.loginFormRef.validate(function(){var t=Object(g["a"])(regeneratorRuntime.mark((function t(a){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,e.$http.post("login",e.loginForm);case 4:if(r=t.sent,n=r.data,200===n.meta.status){t.next=8;break}return t.abrupt("return",e.$message.error(n.meta.msg));case 8:e.$message.success(n.meta.msg),window.sessionStorage.setItem("token",n.data.token),e.$router.push("/home");case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}}},b=f,h=(a("23c4"),Object(l["a"])(b,m,p,!1,null,"2d7d4d86",null)),v=h.exports,w=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-container",{staticClass:"home-container"},[r("el-header",[r("div",{staticClass:"logo"},[r("img",{attrs:{src:a("5bfa"),alt:""}}),r("span",[e._v("电商后台管理系统")])]),r("el-button",{attrs:{type:"info"},on:{click:e.logout}},[e._v("退出")])],1),r("el-container",[r("el-aside",{attrs:{width:e.isCollapse?"64px":"200px"}},[r("div",{staticClass:"toggle-button",on:{click:e.toggleCollapse}},[e._v("|||")]),r("el-menu",{attrs:{"background-color":"#333744","text-color":"#fff","active-text-color":"#409eff","unique-opened":"",router:"",collapse:e.isCollapse,"collapse-transition":!1,"default-active":e.activePath}},e._l(e.menulist,(function(t){return r("el-submenu",{key:t.id,attrs:{index:t.id+""}},[r("template",{slot:"title"},[r("i",{class:e.iconObj[t.id]}),r("span",[e._v(e._s(t.authName))])]),e._l(t.children,(function(t){return r("el-menu-item",{key:t.id,attrs:{index:"/"+t.path},on:{click:function(a){return e.saveActiveState("/"+t.path)}}},[r("template",{slot:"title"},[r("i",{staticClass:"el-icon-menu"}),r("span",[e._v(e._s(t.authName))])])],2)}))],2)})),1)],1),r("el-main",[r("router-view")],1)],1)],1)},_=[],x={name:"Home",data:function(){return{menulist:[],iconObj:{125:"iconfont icon-user",103:"iconfont icon-tijikongjian",101:"iconfont icon-shangpin",102:"iconfont icon-danju",145:"iconfont icon-baobiao"},isCollapse:!1,activePath:""}},created:function(){this.getMenuList(),this.activePath=window.sessionStorage.getItem("activePath")},methods:{logout:function(){window.sessionStorage.clear(),this.$router.push("/login")},getMenuList:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("/menus");case 2:if(a=t.sent,r=a.data,200===r.meta.status){t.next=6;break}return t.abrupt("return",e.$message.error(r.meta.msg));case 6:e.menulist=r.data;case 7:case"end":return t.stop()}}),t)})))()},toggleCollapse:function(){this.isCollapse=!this.isCollapse},saveActiveState:function(e){window.sessionStorage.setItem("activePath",e),this.activePath=e}}},y=x,k=(a("06ea"),Object(l["a"])(y,w,_,!1,null,"44307eea",null)),R=k.exports,$=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},F=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("h2",[e._v("少壮不努力, 老大徒伤悲！")])])}],C={},D=C,I=Object(l["a"])(D,$,F,!1,null,"6c82dfcc",null),V=I.exports,j=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/home"}}},[e._v("首页")]),a("el-breadcrumb-item",[e._v("用户管理")]),a("el-breadcrumb-item",[e._v("用户列表")])],1),a("el-card",[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("el-input",{attrs:{placeholder:"请输入内容",clearable:""},on:{clear:e.getUserList},model:{value:e.queryInfo.query,callback:function(t){e.$set(e.queryInfo,"query",t)},expression:"queryInfo.query"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.getUserList},slot:"append"})],1)],1),a("el-col",{attrs:{span:4}},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.addDialogVisible=!0}}},[e._v("添加用户")])],1)],1),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.userlist,stripe:"",border:""}},[a("el-table-column",{attrs:{label:"#",type:"index"}}),a("el-table-column",{attrs:{label:"姓名",prop:"username"}}),a("el-table-column",{attrs:{label:"邮箱",prop:"email"}}),a("el-table-column",{attrs:{label:"电话",prop:"mobile"}}),a("el-table-column",{attrs:{label:"角色",prop:"role_name"}}),a("el-table-column",{attrs:{label:"状态",prop:"mg_state"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-switch",{on:{change:function(a){return e.userStateChanged(t.row)}},model:{value:t.row.mg_state,callback:function(a){e.$set(t.row,"mg_state",a)},expression:"scope.row.mg_state"}})]}}])}),a("el-table-column",{attrs:{label:"操作",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"mini"},on:{click:function(a){return e.showEditDialog(t.row.id)}}}),a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini"},on:{click:function(a){return e.delUserById(t.row.id)}}}),a("el-tooltip",{attrs:{effect:"dark",content:"分配角色",placement:"top",enterable:!1}},[a("el-button",{attrs:{type:"warning",icon:"el-icon-setting",size:"mini"},on:{click:function(a){return e.setRole(t.row)}}})],1)]}}])})],1),a("el-pagination",{attrs:{"current-page":e.queryInfo.pagenum,"page-sizes":[1,2,5,8,10],"page-size":e.queryInfo.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:e.total,background:""},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),a("el-dialog",{attrs:{title:"添加用户",visible:e.addDialogVisible,width:"50%"},on:{"update:visible":function(t){e.addDialogVisible=t},close:e.addDialogClosed}},[a("el-form",{ref:"addFormRef",attrs:{model:e.addForm,rules:e.addFormRules,"label-width":"70px"}},[a("el-form-item",{attrs:{label:"用户名",prop:"username"}},[a("el-input",{model:{value:e.addForm.username,callback:function(t){e.$set(e.addForm,"username",t)},expression:"addForm.username"}})],1),a("el-form-item",{attrs:{label:"密码",prop:"password"}},[a("el-input",{model:{value:e.addForm.password,callback:function(t){e.$set(e.addForm,"password",t)},expression:"addForm.password"}})],1),a("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[a("el-input",{model:{value:e.addForm.email,callback:function(t){e.$set(e.addForm,"email",t)},expression:"addForm.email"}})],1),a("el-form-item",{attrs:{label:"手机",prop:"mobile"}},[a("el-input",{model:{value:e.addForm.mobile,callback:function(t){e.$set(e.addForm,"mobile",t)},expression:"addForm.mobile"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.addDialogVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.addUser}},[e._v("确 定")])],1)],1),a("el-dialog",{attrs:{title:"修改用户信息",visible:e.editDialogVisible,width:"50%"},on:{"update:visible":function(t){e.editDialogVisible=t},close:e.editDialogClosed}},[a("el-form",{ref:"editFormRef",attrs:{model:e.editForm,rules:e.editFormRules,"label-width":"70px"}},[a("el-form-item",{attrs:{label:"用户名"}},[a("el-input",{attrs:{disabled:""},model:{value:e.editForm.username,callback:function(t){e.$set(e.editForm,"username",t)},expression:"editForm.username"}})],1),a("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[a("el-input",{model:{value:e.editForm.email,callback:function(t){e.$set(e.editForm,"email",t)},expression:"editForm.email"}})],1),a("el-form-item",{attrs:{label:"手机",prop:"mobile"}},[a("el-input",{model:{value:e.editForm.mobile,callback:function(t){e.$set(e.editForm,"mobile",t)},expression:"editForm.mobile"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.editDialogVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.editUser}},[e._v("确 定")])],1)],1),a("el-dialog",{attrs:{title:"分配角色",visible:e.setRoleDialogVisible,width:"50%"},on:{"update:visible":function(t){e.setRoleDialogVisible=t},close:e.setRoleDialogClose}},[a("div",{staticClass:"set-role"},[a("p",[e._v("当前的用户: "+e._s(e.userInfo.username))]),a("p",[e._v("当前的角色: "+e._s(e.userInfo.role_name))]),a("p",[e._v(" 分配新角色: "),a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.selectedRoleId,callback:function(t){e.selectedRoleId=t},expression:"selectedRoleId"}},e._l(e.rolesList,(function(e){return a("el-option",{key:e.id,attrs:{label:e.roleName,value:e.id}})})),1)],1)]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.setRoleDialogVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.saveRoleInfo}},[e._v("确 定")])],1)])],1)},O=[],L=(a("99af"),{name:"Users",data:function(){var e=function(e,t,a){var r=/^(0|86|17951)?(13[0-9]|15[012356789]|17[678]|18[0-9]|14[57])[0-9]{8}$/;if(r.test(t))return a();a(new Error("请输入正确的手机号"))};return{queryInfo:{query:"",pagenum:1,pagesize:5},userlist:[],total:0,addDialogVisible:!1,addForm:{username:"",password:"",email:"",mobile:""},addFormRules:{username:[{required:!0,message:"请输入用户名称",trigger:"blur"},{min:5,max:10,message:"长度在 5 到 10 个字符",trigger:"blur"}],password:[{required:!0,message:"请输入用户密码",trigger:"blur"},{min:6,max:15,message:"请输入正确的密码",trigger:"blur"}],email:[{required:!0,message:"请输入邮箱地址",trigger:"blur"},{type:"email",message:"请输入正确的邮箱地址",trigger:["blur"]}],mobile:[{required:!0,message:"请输入手机号",trigger:"blur"},{validator:e,trigger:"blur"}]},editDialogVisible:!1,editForm:{},editFormRules:{email:[{required:!0,message:"请输入邮箱地址",trigger:"blur"},{type:"email",message:"请输入正确的邮箱地址",trigger:["blur"]}],mobile:[{required:!0,message:"请输入手机号",trigger:"blur"},{validator:e,trigger:"blur"}]},setRoleDialogVisible:!1,userInfo:{},rolesList:[],selectedRoleId:""}},created:function(){this.getUserList()},methods:{getUserList:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("users",{params:e.queryInfo});case 2:if(a=t.sent,r=a.data,200===r.meta.status){t.next=6;break}return t.abrupt("return",e.$message.error(r.meta.msg));case 6:e.userlist=r.data.users,e.total=r.data.total;case 8:case"end":return t.stop()}}),t)})))()},handleSizeChange:function(e){this.queryInfo.pagesize=e,this.getUserList()},handleCurrentChange:function(e){this.queryInfo.pagenum=e,this.getUserList()},userStateChanged:function(e){var t=this;return Object(g["a"])(regeneratorRuntime.mark((function a(){var r,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t.$http.put("users/".concat(e.id,"/state/").concat(e.mg_state));case 2:if(r=a.sent,n=r.data,200===n.meta.status){a.next=7;break}return e.mg_state=!e.mg_state,a.abrupt("return",t.message.error(n.meta.msg));case 7:return a.abrupt("return",t.$message.success(n.meta.msg));case 8:case"end":return a.stop()}}),a)})))()},addDialogClosed:function(){this.$refs.addFormRef.resetFields()},addUser:function(){var e=this;this.$refs.addFormRef.validate(function(){var t=Object(g["a"])(regeneratorRuntime.mark((function t(a){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,e.$http.post("users",e.addForm);case 4:if(r=t.sent,n=r.data,201===n.meta.status){t.next=8;break}return t.abrupt("return",e.$message.error(n.meta.msg));case 8:e.$message.success(n.meta.msg),e.addDialogVisible=!1,e.getUserList();case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},showEditDialog:function(e){var t=this;return Object(g["a"])(regeneratorRuntime.mark((function a(){var r,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.editDialogVisible=!0,a.next=3,t.$http.get("users/"+e);case 3:if(r=a.sent,n=r.data,200===n.meta.status){a.next=7;break}return a.abrupt("return",t.$message.error(n.meta.msg));case 7:t.editForm=n.data;case 8:case"end":return a.stop()}}),a)})))()},editDialogClosed:function(){this.$refs.editFormRef.resetFields()},editUser:function(){var e=this;this.$refs.editFormRef.validate(function(){var t=Object(g["a"])(regeneratorRuntime.mark((function t(a){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,e.$http.put("users/"+e.editForm.id,{email:e.editForm.email,mobile:e.editForm.mobile});case 4:if(r=t.sent,n=r.data,200===n.meta.status){t.next=8;break}return t.abrupt("return",e.$message.error(n.meta.msg));case 8:e.$message.success(n.meta.msg),e.editDialogVisible=!1,e.getUserList();case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},delUserById:function(e){var t=this;return Object(g["a"])(regeneratorRuntime.mark((function a(){var r,n,s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t.$confirm("此操作将永久删除该角色, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).catch((function(e){return e}));case 2:if(r=a.sent,"confirm"===r){a.next=5;break}return a.abrupt("return",t.$message.info("已取消删除"));case 5:return a.next=7,t.$http.delete("users/"+e);case 7:if(n=a.sent,s=n.data,200===s.meta.status){a.next=11;break}return a.abrupt("return",t.$message.error(s.meta.msg));case 11:t.$message.success(s.meta.msg),t.getUserList();case 13:case"end":return a.stop()}}),a)})))()},setRole:function(e){var t=this;return Object(g["a"])(regeneratorRuntime.mark((function a(){var r,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.userInfo=e,a.next=3,t.$http.get("roles");case 3:if(r=a.sent,n=r.data,200===n.meta.status){a.next=7;break}return a.abrupt("return",t.$message.error(n.meta.msg));case 7:t.rolesList=n.data,t.setRoleDialogVisible=!0;case 9:case"end":return a.stop()}}),a)})))()},setRoleDialogClose:function(){this.selectedRoleId="",this.userInfo={}},saveRoleInfo:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.selectedRoleId){t.next=2;break}return t.abrupt("return",e.$message.error("请选择需要分配的角色"));case 2:return t.next=4,e.$http.put("users/".concat(e.userInfo.id,"/role"),{rid:e.selectedRoleId});case 4:if(a=t.sent,r=a.data,200===r.meta.status){t.next=8;break}return t.abrupt("return",e.$message.error(r.meta.msg));case 8:e.$message.success(r.meta.msg),e.getUserList(),e.setRoleDialogVisible=!1;case 11:case"end":return t.stop()}}),t)})))()}}}),q=L,z=(a("d375"),Object(l["a"])(q,j,O,!1,null,"4f45e1ee",null)),T=z.exports,S=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/home"}}},[e._v("首页")]),a("el-breadcrumb-item",[e._v("权限管理")]),a("el-breadcrumb-item",[e._v("权限列表")])],1),a("el-card",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.rightsList,stripe:"",border:""}},[a("el-table-column",{attrs:{label:"#",type:"index"}}),a("el-table-column",{attrs:{label:"权限名称",prop:"authName"}}),a("el-table-column",{attrs:{label:"路径",prop:"path"}}),a("el-table-column",{attrs:{label:"权限等级",prop:"level"},scopedSlots:e._u([{key:"default",fn:function(t){return["0"===t.row.level?a("el-tag",[e._v("一级")]):"1"===t.row.level?a("el-tag",{attrs:{type:"success"}},[e._v("二级")]):a("el-tag",{attrs:{type:"warning"}},[e._v("三级")])]}}])})],1)],1)],1)},P=[],N={name:"Rights",data:function(){return{rightsList:[]}},created:function(){this.getRigthsList()},methods:{getRigthsList:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("rights/list");case 2:if(a=t.sent,r=a.data,200===r.meta.status){t.next=6;break}return t.abrupt("return",e.$message.error(r.meta.msg));case 6:e.rightsList=r.data;case 7:case"end":return t.stop()}}),t)})))()}}},E=N,B=Object(l["a"])(E,S,P,!1,null,"4b70d9c1",null),K=B.exports,U=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/home"}}},[e._v("首页")]),a("el-breadcrumb-item",[e._v("权限管理")]),a("el-breadcrumb-item",[e._v("角色列表")])],1),a("el-card",[a("el-row",[a("el-col",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.addRoleDialogVisible=!0}}},[e._v("添加角色")])],1)],1),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.rolelist,border:"",stripe:""}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.children,(function(r,n){return a("el-row",{key:r.id,class:["bdbottom","vcenter",0===n?"bdtop":""]},[a("el-col",{attrs:{span:5}},[a("el-tag",{attrs:{closable:""},on:{close:function(a){return e.removeRightById(t.row,r.id)}}},[e._v(e._s(r.authName))]),a("i",{staticClass:"el-icon-caret-right"})],1),a("el-col",{attrs:{span:19}},e._l(r.children,(function(r,n){return a("el-row",{key:r.id,class:[0===n?"":"bdtop","vcenter"]},[a("el-col",{attrs:{span:6}},[a("el-tag",{attrs:{type:"success",closable:""},on:{close:function(a){return e.removeRightById(t.row,r.id)}}},[e._v(e._s(r.authName))]),a("i",{staticClass:"el-icon-caret-right"})],1),a("el-col",{attrs:{span:18}},e._l(r.children,(function(r){return a("el-tag",{key:r.id,attrs:{type:"warning",closable:""},on:{close:function(a){return e.removeRightById(t.row,r.id)}}},[e._v(e._s(r.authName))])})),1)],1)})),1)],1)}))}}])}),a("el-table-column",{attrs:{type:"index",label:"#"}}),a("el-table-column",{attrs:{prop:"roleName",label:"角色名称"}}),a("el-table-column",{attrs:{prop:"roleDesc",label:"角色描述"}}),a("el-table-column",{attrs:{label:"操作",width:"290"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"mini"},on:{click:function(a){return e.showEditRoleDialog(t.row.id)}}},[e._v("编辑")]),a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini"},on:{click:function(a){return e.delRoleById(t.row.id)}}},[e._v("删除")]),a("el-button",{attrs:{type:"warning",icon:"el-icon-setting",size:"mini"},on:{click:function(a){return e.setRightDialog(t.row)}}},[e._v("分配权限")])]}}])})],1)],1),a("el-dialog",{attrs:{title:"添加角色",visible:e.addRoleDialogVisible,width:"50%"},on:{"update:visible":function(t){e.addRoleDialogVisible=t},close:e.addDialogClosed}},[a("el-form",{ref:"addRoleFormRef",attrs:{model:e.addRoleForm,rules:e.addRoleFormRules,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"角色名称",prop:"roleName"}},[a("el-input",{model:{value:e.addRoleForm.roleName,callback:function(t){e.$set(e.addRoleForm,"roleName",t)},expression:"addRoleForm.roleName"}})],1),a("el-form-item",{attrs:{label:"角色描述",prop:"roleDesc"}},[a("el-input",{model:{value:e.addRoleForm.roleDesc,callback:function(t){e.$set(e.addRoleForm,"roleDesc",t)},expression:"addRoleForm.roleDesc"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.addRoleDialogVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.addRole}},[e._v("确 定")])],1)],1),a("el-dialog",{attrs:{title:"编辑角色",visible:e.editRoleDialogVisible,width:"50%"},on:{"update:visible":function(t){e.editRoleDialogVisible=t},close:e.editRoleDialogClosed}},[a("el-form",{ref:"editRoleFormRef",attrs:{model:e.editRoleForm,rules:e.editRoleFormRules,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"角色名称",prop:"roleName"}},[a("el-input",{model:{value:e.editRoleForm.roleName,callback:function(t){e.$set(e.editRoleForm,"roleName",t)},expression:"editRoleForm.roleName"}})],1),a("el-form-item",{attrs:{label:"角色描述",prop:"roleDesc"}},[a("el-input",{model:{value:e.editRoleForm.roleDesc,callback:function(t){e.$set(e.editRoleForm,"roleDesc",t)},expression:"editRoleForm.roleDesc"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.editRoleDialogVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.editRole}},[e._v("确 定")])],1)],1),a("el-dialog",{attrs:{title:"分配角色",visible:e.setRightDialogVisible,width:"50%"},on:{"update:visible":function(t){e.setRightDialogVisible=t},close:e.setRightDialogClosed}},[a("el-tree",{ref:"treeRef",attrs:{data:e.rightslist,props:e.treeProps,"node-key":"id","default-checked-keys":e.defKeys,"show-checkbox":"","default-expand-all":""}}),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.setRightDialogVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.allotRights}},[e._v("确 定")])],1)],1)],1)},G=[],A=(a("4160"),a("a15b"),a("159b"),a("2909")),M={name:"Roles",data:function(){return{rolelist:[],addRoleForm:{roleName:"",roleDesc:""},addRoleDialogVisible:!1,addRoleFormRules:{roleName:[{required:!0,message:"请输入角色名称",trigger:"blur"},{min:2,max:10,message:"长度在 2 到 10 个字符",trigger:"blur"}],roleDesc:[{required:!0,message:"请输入角色描述",trigger:"blur"},{min:2,max:10,message:"长度在 2 到 10 个字符",trigger:"blur"}]},editRoleDialogVisible:!1,editRoleForm:{},editRoleFormRules:{roleName:[{required:!0,message:"请输入角色名称",trigger:"blur"},{min:2,max:10,message:"长度在 2 到 10 个字符",trigger:"blur"}],roleDesc:[{required:!0,message:"请输入角色描述",trigger:"blur"},{min:2,max:10,message:"长度在 2 到 10 个字符",trigger:"blur"}]},setRightDialogVisible:!1,rightslist:[],treeProps:{label:"authName",children:"children"},defKeys:[],roleId:""}},created:function(){this.getRolesList()},methods:{getRolesList:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("roles");case 2:if(a=t.sent,r=a.data,200===r.meta.status){t.next=6;break}return t.abrupt("return",e.$message.error(r.meta.msg));case 6:e.rolelist=r.data;case 7:case"end":return t.stop()}}),t)})))()},addDialogClosed:function(){this.$refs.addRoleFormRef.resetFields()},addRole:function(){var e=this;this.$refs.addRoleFormRef.validate(function(){var t=Object(g["a"])(regeneratorRuntime.mark((function t(a){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,e.$http.post("roles",e.addRoleForm);case 4:if(r=t.sent,n=r.data,201===n.meta.status){t.next=8;break}return t.abrupt("return",e.$message.error(n.meta.msg));case 8:e.$message.success(n.meta.msg),e.addRoleDialogVisible=!1,e.getRolesList();case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},showEditRoleDialog:function(e){var t=this;return Object(g["a"])(regeneratorRuntime.mark((function a(){var r,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.editRoleDialogVisible=!0,a.next=3,t.$http.get("roles/"+e);case 3:if(r=a.sent,n=r.data,200===n.meta.status){a.next=7;break}return a.abrupt("return",t.$message.error(n.meta.msg));case 7:t.editRoleForm=n.data;case 8:case"end":return a.stop()}}),a)})))()},editRoleDialogClosed:function(){this.$refs.editRoleFormRef.resetFields()},editRole:function(){var e=this;this.$refs.editRoleFormRef.validate(function(){var t=Object(g["a"])(regeneratorRuntime.mark((function t(a){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,e.$http.put("roles/"+e.editRoleForm.roleId,{roleName:e.editRoleForm.roleName,roleDesc:e.editRoleForm.roleDesc});case 4:if(r=t.sent,n=r.data,200===n.meta.status){t.next=8;break}return t.abrupt("return",e.$message.error(n.meta.msg));case 8:e.$message.success(n.meta.msg),e.editRoleDialogVisible=!1,e.getRolesList();case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},delRoleById:function(e){var t=this;return Object(g["a"])(regeneratorRuntime.mark((function a(){var r,n,s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).catch((function(e){return e}));case 2:if(r=a.sent,"confirm"===r){a.next=5;break}return a.abrupt("return",t.$message.info("已取消删除"));case 5:return a.next=7,t.$http.delete("roles/"+e);case 7:if(n=a.sent,s=n.data,200===s.meta.status){a.next=11;break}return a.abrupt("return",t.$message.error(s.meta.msg));case 11:t.$message.success(s.meta.msg),t.getRolesList();case 13:case"end":return a.stop()}}),a)})))()},removeRightById:function(e,t){var a=this;return Object(g["a"])(regeneratorRuntime.mark((function r(){var n,s,i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,a.$confirm("此操作将永久删除该权限, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).catch((function(e){return e}));case 2:if(n=r.sent,"confirm"===n){r.next=5;break}return r.abrupt("return",a.$message.info("已取消删除"));case 5:return r.next=7,a.$http.delete("roles/".concat(e.id,"/rights/").concat(t));case 7:if(s=r.sent,i=s.data,200===i.meta.status){r.next=11;break}return r.abrupt("return",a.$message.error(i.meta.msg));case 11:a.$message.success(i.meta.msg),e.children=i.data;case 13:case"end":return r.stop()}}),r)})))()},setRightDialog:function(e){var t=this;return Object(g["a"])(regeneratorRuntime.mark((function a(){var r,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.roleId=e.id,a.next=3,t.$http.get("rights/tree");case 3:if(r=a.sent,n=r.data,200===n.meta.status){a.next=7;break}return a.abrupt("return",t.$message.error(n.meta.msg));case 7:t.rightslist=n.data,t.getLeafKeys(e,t.defKeys),t.setRightDialogVisible=!0;case 10:case"end":return a.stop()}}),a)})))()},getLeafKeys:function(e,t){var a=this;if(!e.children)return t.push(e.id);e.children.forEach((function(e){return a.getLeafKeys(e,t)}))},setRightDialogClosed:function(){this.defKeys=[]},allotRights:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){var a,r,n,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=[].concat(Object(A["a"])(e.$refs.treeRef.getCheckedKeys()),Object(A["a"])(e.$refs.treeRef.getHalfCheckedKeys())),r=a.join(","),t.next=4,e.$http.post("roles/".concat(e.roleId,"/rights"),{rids:r});case 4:if(n=t.sent,s=n.data,200===s.meta.status){t.next=8;break}return t.abrupt("return",e.$message.error(s.meta.msg));case 8:e.$message.success(s.meta.msg),e.getRolesList(),e.setRightDialogVisible=!1;case 11:case"end":return t.stop()}}),t)})))()}}},H=M,Y=(a("a2e5"),Object(l["a"])(H,U,G,!1,null,"26be2e75",null)),J=Y.exports,Q=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/home"}}},[e._v("首页")]),a("el-breadcrumb-item",[e._v("商品管理")]),a("el-breadcrumb-item",[e._v("商品分类")])],1),a("el-card",[a("el-row",[a("el-col",[a("el-button",{attrs:{type:"primary"},on:{click:e.showAddCateDialog}},[e._v("添加分类")])],1)],1),a("tree-table",{attrs:{data:e.catelist,columns:e.columns,"show-row-hover":!1,"selection-type":!1,"expand-type":!1,"index-text":"#","show-index":"",border:""},scopedSlots:e._u([{key:"isok",fn:function(e){return[!1===e.row.cat_deleted?a("i",{staticClass:"el-icon-success",staticStyle:{color:"lightgreen"}}):a("i",{staticClass:"el-icon-error",staticStyle:{color:"red"}})]}},{key:"order",fn:function(t){return[0===t.row.cat_level?a("el-tag",{attrs:{size:"mini"}},[e._v("一级")]):1===t.row.cat_level?a("el-tag",{attrs:{type:"success",size:"mini"}},[e._v("二级")]):a("el-tag",{attrs:{type:"warning",size:"mini"}},[e._v("三级")])]}},{key:"opt",fn:function(t){return[a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"mini"},on:{click:function(a){return e.showEditCateDialog(t.row.cat_id)}}},[e._v("编辑")]),a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini"},on:{click:function(a){return e.removeCateById(t.row.cat_id)}}},[e._v("删除")])]}}])}),a("el-pagination",{attrs:{"current-page":e.queryInfo.pagenum,"page-sizes":[1,2,5,10],"page-size":e.queryInfo.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),a("el-dialog",{attrs:{title:"添加分类",visible:e.addCateDialogVisible,width:"50%"},on:{"update:visible":function(t){e.addCateDialogVisible=t},close:e.addCateDialogClosed}},[a("el-form",{ref:"addCateFormRef",attrs:{model:e.addCateForm,rules:e.addCateFormRules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"分类名称:",prop:"cat_name"}},[a("el-input",{model:{value:e.addCateForm.cat_name,callback:function(t){e.$set(e.addCateForm,"cat_name",t)},expression:"addCateForm.cat_name"}})],1),a("el-form-item",{attrs:{label:"父级分类:"}},[a("el-cascader",{attrs:{options:e.parentCateList,props:e.cascaderProps,clearable:""},on:{change:e.prentCateChanged},model:{value:e.selectedKeys,callback:function(t){e.selectedKeys=t},expression:"selectedKeys"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.addCateDialogVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.addCate}},[e._v("确 定")])],1)],1),a("el-dialog",{attrs:{title:"编辑分类",visible:e.editCateDialogVisible,width:"50%"},on:{"update:visible":function(t){e.editCateDialogVisible=t},close:e.editCateDialogClosed}},[a("el-form",{ref:"editCateFormRef",attrs:{model:e.editCateForm,rules:e.editCateFormRules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"分类名称:",prop:"cat_name"}},[a("el-input",{model:{value:e.editCateForm.cat_name,callback:function(t){e.$set(e.editCateForm,"cat_name",t)},expression:"editCateForm.cat_name"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.editCateDialogVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.editCate}},[e._v("确 定")])],1)],1)],1)},W=[],X={name:"Category",data:function(){return{queryInfo:{type:3,pagenum:1,pagesize:5},catelist:[],total:0,columns:[{label:"分类名称",prop:"cat_name"},{label:"是否有效",type:"template",template:"isok"},{label:"排序",type:"template",template:"order"},{label:"操作",type:"template",template:"opt"}],addCateDialogVisible:!1,addCateForm:{cat_name:"",cat_pid:0,cat_level:0},addCateFormRules:{cat_name:[{required:!0,message:"请输入分类名称",trigger:"blur"}]},parentCateList:[],selectedKeys:[],cascaderProps:{expandTrigger:"hover",value:"cat_id",label:"cat_name",children:"children",checkStrictly:!0},editCateDialogVisible:!1,editCateForm:{},editCateFormRules:{cat_name:[{required:!0,message:"请输入分类名称",trigger:"blur"}]}}},created:function(){this.getCateList()},methods:{getCateList:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("categories",{params:e.queryInfo});case 2:if(a=t.sent,r=a.data,200===r.meta.status){t.next=6;break}return t.abrupt("return",e.$message.error(r.meta.msg));case 6:e.catelist=r.data.result,e.total=r.data.total;case 8:case"end":return t.stop()}}),t)})))()},handleSizeChange:function(e){this.queryInfo.pagesize=e,this.getCateList()},handleCurrentChange:function(e){this.queryInfo.pagenum=e,this.getCateList()},showAddCateDialog:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.getPrentCatelist(),e.addCateDialogVisible=!0;case 2:case"end":return t.stop()}}),t)})))()},getPrentCatelist:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("categories",{params:{type:2}});case 2:if(a=t.sent,r=a.data,200===r.meta.status){t.next=6;break}return t.abrupt("return",e.$message.error(r.meta.msg));case 6:e.parentCateList=r.data;case 7:case"end":return t.stop()}}),t)})))()},prentCateChanged:function(){this.selectedKeys.length>0?(this.addCateForm.cat_pid=this.selectedKeys[this.selectedKeys.length-1],this.addCateForm.cat_level=this.selectedKeys.length):(this.addCateForm.cat_pid=0,this.addCateForm.cat_level=0)},addCateDialogClosed:function(){this.$refs.addCateFormRef.resetFields(),this.selectedKeys=[],this.addCateForm.cat_pid=0,this.addCateForm.cat_level=0},addCate:function(){var e=this;this.$refs.addCateFormRef.validate(function(){var t=Object(g["a"])(regeneratorRuntime.mark((function t(a){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,e.$http.post("categories",e.addCateForm);case 4:if(r=t.sent,n=r.data,201===n.meta.status){t.next=8;break}return t.abrupt("return",e.$message.error(n.meta.msg));case 8:e.$message.success(n.meta.msg),e.getCateList(),e.addCateDialogVisible=!1;case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},showEditCateDialog:function(e){var t=this;return Object(g["a"])(regeneratorRuntime.mark((function a(){var r,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.editCateDialogVisible=!0,a.next=3,t.$http.get("categories/"+e);case 3:if(r=a.sent,n=r.data,200===n.meta.status){a.next=7;break}return a.abrupt("return",t.$message.error(n.meta.msg));case 7:t.editCateForm=n.data;case 8:case"end":return a.stop()}}),a)})))()},editCateDialogClosed:function(){this.$refs.editCateFormRef.resetFields()},editCate:function(){var e=this;this.$refs.editCateFormRef.validate(function(){var t=Object(g["a"])(regeneratorRuntime.mark((function t(a){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,e.$http.put("categories/".concat(e.editCateForm.cat_id),{cat_name:e.editCateForm.cat_name});case 4:if(r=t.sent,n=r.data,200===n.meta.status){t.next=8;break}return t.abrupt("return",e.$message.error(n.meta.msg));case 8:e.$message.success(n.meta.msg),e.getCateList(),e.editCateDialogVisible=!1;case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},removeCateById:function(e){var t=this;return Object(g["a"])(regeneratorRuntime.mark((function a(){var r,n,s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t.$confirm("此操作将永久删除该分类, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).catch((function(e){return e}));case 2:if(r=a.sent,"confirm"===r){a.next=5;break}return a.abrupt("return",t.$message.info("已取消删除"));case 5:return a.next=7,t.$http.delete("categories/"+e);case 7:if(n=a.sent,s=n.data,200===s.meta.status){a.next=11;break}return a.abrupt("return",t.$message.error(s.meta.msg));case 11:t.$message.success(s.meta.msg),t.getCateList();case 13:case"end":return a.stop()}}),a)})))()}}},Z=X,ee=(a("b0f2"),Object(l["a"])(Z,Q,W,!1,null,"6b79df4a",null)),te=ee.exports,ae=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/home"}}},[e._v("首页")]),a("el-breadcrumb-item",[e._v("商品管理")]),a("el-breadcrumb-item",[e._v("分类参数")])],1),a("el-card",[a("el-alert",{attrs:{title:"注意: 只允许为第三级分类设置相关的参数",type:"warning","show-icon":"",closable:!1}}),a("el-row",{staticClass:"cat_opt"},[a("el-col",[a("span",[e._v("选择商品分类: ")]),a("el-cascader",{attrs:{options:e.catelist,props:e.cateProps},on:{change:e.handleChange},model:{value:e.selectedCateKeys,callback:function(t){e.selectedCateKeys=t},expression:"selectedCateKeys"}})],1)],1),a("el-tabs",{on:{"tab-click":e.tabClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"动态参数",name:"many"}},[a("el-button",{attrs:{type:"primary",size:"mini",disabled:e.isBtnDisabled},on:{click:function(t){e.addDialogVisible=!0}}},[e._v("添加参数")]),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.manyTabData,border:"",stripe:""}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._l(t.row.attr_vals,(function(r,n){return a("el-tag",{key:n,attrs:{closable:""},on:{close:function(a){return e.handleColse(n,t.row)}}},[e._v(e._s(r))])})),t.row.inputVisible?a("el-input",{ref:"saveTagInput",staticClass:"input-new-tag",attrs:{size:"small"},on:{blur:function(a){return e.handleInputConfirm(t.row)}},nativeOn:{keyup:function(a){return!a.type.indexOf("key")&&e._k(a.keyCode,"enter",13,a.key,"Enter")?null:e.handleInputConfirm(t.row)}},model:{value:t.row.inputValue,callback:function(a){e.$set(t.row,"inputValue",a)},expression:"scope.row.inputValue"}}):a("el-button",{staticClass:"button-new-tag",attrs:{size:"small"},on:{click:function(a){return e.showInput(t.row)}}},[e._v("+ New Tag")])]}}])}),a("el-table-column",{attrs:{type:"index",label:"#"}}),a("el-table-column",{attrs:{prop:"attr_name",label:"参数名称"}}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-edit"},on:{click:function(a){return e.showEditDialog(t.row.attr_id)}}},[e._v("编辑")]),a("el-button",{attrs:{type:"danger",size:"mini",icon:"el-icon-delete"},on:{click:function(a){return e.removeParams(t.row.attr_id)}}},[e._v("删除")])]}}])})],1)],1),a("el-tab-pane",{attrs:{label:"静态属性",name:"only"}},[a("el-button",{attrs:{type:"primary",size:"mini",disabled:e.isBtnDisabled},on:{click:function(t){e.addDialogVisible=!0}}},[e._v("添加属性")]),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.onlyTabData,border:"",stripe:""}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._l(t.row.attr_vals,(function(r,n){return a("el-tag",{key:n,attrs:{closable:""},on:{close:function(a){return e.handleColse(n,t.row)}}},[e._v(e._s(r))])})),t.row.inputVisible?a("el-input",{ref:"saveTagInput",staticClass:"input-new-tag",attrs:{size:"small"},on:{blur:function(a){return e.handleInputConfirm(t.row)}},nativeOn:{keyup:function(a){return!a.type.indexOf("key")&&e._k(a.keyCode,"enter",13,a.key,"Enter")?null:e.handleInputConfirm(t.row)}},model:{value:t.row.inputValue,callback:function(a){e.$set(t.row,"inputValue",a)},expression:"scope.row.inputValue"}}):a("el-button",{staticClass:"button-new-tag",attrs:{size:"small"},on:{click:function(a){return e.showInput(t.row)}}},[e._v("+ New Tag")])]}}])}),a("el-table-column",{attrs:{type:"index",label:"#"}}),a("el-table-column",{attrs:{prop:"attr_name",label:"属性名称"}}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-edit"},on:{click:function(a){return e.showEditDialog(t.row.attr_id)}}},[e._v("编辑")]),a("el-button",{attrs:{type:"danger",size:"mini",icon:"el-icon-delete"},on:{click:function(a){return e.removeParams(t.row.attr_id)}}},[e._v("删除")])]}}])})],1)],1)],1)],1),a("el-dialog",{attrs:{title:"添加"+e.titleText,visible:e.addDialogVisible,width:"50%"},on:{"update:visible":function(t){e.addDialogVisible=t},close:e.addDialogClosed}},[a("el-form",{ref:"addFormRef",attrs:{model:e.addForm,rules:e.addFormRules,"label-width":"90px"}},[a("el-form-item",{attrs:{label:e.titleText,prop:"attr_name"}},[a("el-input",{model:{value:e.addForm.attr_name,callback:function(t){e.$set(e.addForm,"attr_name",t)},expression:"addForm.attr_name"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.addDialogVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.addParams}},[e._v("确 定")])],1)],1),a("el-dialog",{attrs:{title:"编辑"+e.titleText,visible:e.editDialogVisible,width:"50%"},on:{"update:visible":function(t){e.editDialogVisible=t},close:e.editDialogClosed}},[a("el-form",{ref:"editFormRef",attrs:{model:e.editForm,rules:e.editFormRules,"label-width":"90px"}},[a("el-form-item",{attrs:{label:e.titleText,prop:"attr_name"}},[a("el-input",{model:{value:e.editForm.attr_name,callback:function(t){e.$set(e.editForm,"attr_name",t)},expression:"editForm.attr_name"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.editDialogVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.editParams}},[e._v("确 定")])],1)],1)],1)},re=[],ne=(a("a434"),a("ac1f"),a("1276"),a("498a"),{name:"Params",data:function(){return{catelist:[],selectedCateKeys:[],cateProps:{expandTrigger:"hover",value:"cat_id",label:"cat_name",children:"children"},activeName:"many",manyTabData:[],onlyTabData:[],addDialogVisible:!1,addForm:{attr_name:""},addFormRules:{attr_name:[{required:!0,message:"请输入参数名称",trigger:"blur"}]},editDialogVisible:!1,editForm:{},editFormRules:{attr_name:[{required:!0,message:"请输入参数名称",trigger:"blur"}]},inputVisible:!1,inputValue:""}},created:function(){this.getCateList()},methods:{getCateList:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("categories");case 2:if(a=t.sent,r=a.data,200===r.meta.status){t.next=6;break}return t.abrupt("return",e.$message.error(r.meta.msg));case 6:e.catelist=r.data;case 7:case"end":return t.stop()}}),t)})))()},handleChange:function(){this.getParamsData()},tabClick:function(){this.getParamsData()},getParamsData:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(3===e.selectedCateKeys.length){t.next=5;break}return e.selectedCateKeys=[],e.manyTabData=[],e.onlyTabData=[],t.abrupt("return");case 5:return t.next=7,e.$http.get("categories/".concat(e.cateId,"/attributes"),{params:{sel:e.activeName}});case 7:if(a=t.sent,r=a.data,200===r.meta.status){t.next=11;break}return t.abrupt("return",e.$message.error(r.meta.msg));case 11:r.data.forEach((function(e){e.attr_vals=e.attr_vals?e.attr_vals.split(","):[],e.inputVisible=!1,e.inputValue=""})),"many"===e.activeName?e.manyTabData=r.data:e.onlyTabData=r.data;case 13:case"end":return t.stop()}}),t)})))()},addDialogClosed:function(){this.$refs.addFormRef.resetFields()},addParams:function(){var e=this;this.$refs.addFormRef.validate(function(){var t=Object(g["a"])(regeneratorRuntime.mark((function t(a){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,e.$http.post("categories/".concat(e.cateId,"/attributes"),{attr_name:e.addForm.attr_name,attr_sel:e.activeName});case 4:if(r=t.sent,n=r.data,201===n.meta.status){t.next=8;break}return t.abrupt("return",e.$message.error(n.meta.msg));case 8:e.$message.success(n.meta.msg),e.getParamsData(),e.addDialogVisible=!1;case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},showEditDialog:function(e){var t=this;return Object(g["a"])(regeneratorRuntime.mark((function a(){var r,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t.$http.get("categories/".concat(t.cateId,"/attributes/").concat(e),{params:{attr_sel:t.activeName}});case 2:if(r=a.sent,n=r.data,200===n.meta.status){a.next=6;break}return a.abrupt("return",t.$message.error(n.meta.msg));case 6:t.editForm=n.data,t.editDialogVisible=!0;case 8:case"end":return a.stop()}}),a)})))()},editDialogClosed:function(){this.$refs.editFormRef.resetFields()},editParams:function(){var e=this;this.$refs.editFormRef.validate(function(){var t=Object(g["a"])(regeneratorRuntime.mark((function t(a){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,e.$http.put("categories/".concat(e.cateId,"/attributes/").concat(e.editForm.attr_id),{attr_name:e.editForm.attr_name,attr_sel:e.activeName});case 4:if(r=t.sent,n=r.data,200===n.meta.status){t.next=8;break}return t.abrupt("return",e.$message.error(n.meta.msg));case 8:e.$message.success(n.meta.msg),e.getParamsData(),e.editDialogVisible=!1;case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},removeParams:function(e){var t=this;return Object(g["a"])(regeneratorRuntime.mark((function a(){var r,n,s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t.$confirm("此操作将永久删除该参数, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).catch((function(e){return e}));case 2:if(r=a.sent,"confirm"===r){a.next=5;break}return a.abrupt("return",t.$message.info("已取消删除"));case 5:return a.next=7,t.$http.delete("categories/".concat(t.cateId,"/attributes/").concat(e));case 7:if(n=a.sent,s=n.data,200===s.meta.status){a.next=11;break}return a.abrupt("return",t.$message.error(s.meta.msg));case 11:t.$message.success(s.meta.msg),t.getParamsData();case 13:case"end":return a.stop()}}),a)})))()},saveAttrVals:function(e){var t=this;return Object(g["a"])(regeneratorRuntime.mark((function a(){var r,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t.$http.put("categories/".concat(t.cateId,"/attributes/").concat(e.attr_id),{attr_name:e.attr_name,attr_sel:e.attr_sel,attr_vals:e.attr_vals.join(",")});case 2:if(r=a.sent,n=r.data,200===n.meta.status){a.next=6;break}return a.abrupt("return",t.$message.error(n.meta.msg));case 6:t.$message.success(n.meta.msg);case 7:case"end":return a.stop()}}),a)})))()},handleInputConfirm:function(e){if(0===e.inputValue.trim().length)return e.inputValue="",void(e.inputVisible=!1);e.attr_vals.push(e.inputValue.trim()),e.inputValue="",e.inputVisible=!1,this.saveAttrVals(e)},showInput:function(e){var t=this;e.inputVisible=!0,this.$nextTick((function(){t.$refs.saveTagInput.$refs.input.focus()}))},handleColse:function(e,t){t.attr_vals.splice(e,1),this.saveAttrVals(t)}},computed:{isBtnDisabled:function(){return 3!==this.selectedCateKeys.length},cateId:function(){return 3===this.selectedCateKeys.length?this.selectedCateKeys[this.selectedCateKeys.length-1]:null},titleText:function(){return"many"===this.activeName?"动态参数":"静态属性"}}}),se=ne,ie=(a("4016"),Object(l["a"])(se,ae,re,!1,null,"0cf47d63",null)),oe=ie.exports,le=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/home"}}},[e._v("首页")]),a("el-breadcrumb-item",[e._v("商品管理")]),a("el-breadcrumb-item",[e._v("商品列表")])],1),a("el-card",[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("el-input",{attrs:{placeholder:"请输入内容",clearable:""},on:{clear:e.getGoodsList},model:{value:e.queryInfo.query,callback:function(t){e.$set(e.queryInfo,"query",t)},expression:"queryInfo.query"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.getGoodsList},slot:"append"})],1)],1),a("el-col",{attrs:{span:4}},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.$router.push("/goods/add")}}},[e._v("添加商品")])],1)],1),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.goodslist,border:"",stripe:""}},[a("el-table-column",{attrs:{type:"index",label:"#",width:"40"}}),a("el-table-column",{attrs:{prop:"goods_name",label:"商品名称"}}),a("el-table-column",{attrs:{align:"center",prop:"goods_price",label:"商品价格(元)",width:"95"}}),a("el-table-column",{attrs:{align:"center",prop:"goods_weight",label:"商品重量",width:"80"}}),a("el-table-column",{attrs:{align:"center",prop:"add_time",label:"创建时间",width:"140"}}),a("el-table-column",{attrs:{align:"center",label:"操作",width:"130"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-edit"}}),a("el-button",{attrs:{type:"danger",size:"mini",icon:"el-icon-delete"},on:{click:function(a){return e.removeGoodsById(t.row.goods_id)}}})]}}])})],1),a("el-pagination",{attrs:{"current-page":e.queryInfo.pagenum,"page-sizes":[5,10,15,20],"page-size":e.queryInfo.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:e.total,background:""},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)},ce=[],ue={name:"GoodsList",data:function(){return{queryInfo:{query:"",pagenum:1,pagesize:10},goodslist:[],total:0}},created:function(){this.getGoodsList()},methods:{getGoodsList:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("goods",{params:e.queryInfo});case 2:if(a=t.sent,r=a.data,200===r.meta.status){t.next=6;break}return t.abrupt("return",e.$message.error(r.meta.msg));case 6:r.data.goods.forEach((function(t){t.add_time=e.$dayjs(t.add_time).format("YYYY-MM-DD HH:mm")})),e.goodslist=r.data.goods,e.total=r.data.total;case 9:case"end":return t.stop()}}),t)})))()},handleSizeChange:function(e){this.queryInfo.pagesize=e,this.getGoodsList()},handleCurrentChange:function(e){this.queryInfo.pagenum=e,this.getGoodsList()},removeGoodsById:function(e){var t=this;return Object(g["a"])(regeneratorRuntime.mark((function a(){var r,n,s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t.$confirm("此操作将永久删除该商品, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).catch((function(e){return e}));case 2:if(r=a.sent,"confirm"===r){a.next=5;break}return a.abrupt("return",t.$message.info("已取消删除"));case 5:return a.next=7,t.$http.delete("goods/"+e);case 7:if(n=a.sent,s=n.data,200===s.meta.status){a.next=11;break}return a.abrupt("return",t.$message.error(s.meta.msg));case 11:t.$message.success(s.meta.msg),t.getGoodsList();case 13:case"end":return a.stop()}}),a)})))()}}},de=ue,me=(a("1f5b"),Object(l["a"])(de,le,ce,!1,null,"c8e5aece",null)),pe=me.exports,ge=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/home"}}},[e._v("首页")]),a("el-breadcrumb-item",[e._v("商品管理")]),a("el-breadcrumb-item",[e._v("添加商品")])],1),a("el-card",[a("el-alert",{attrs:{title:"添加商品信息",type:"info",center:"","show-icon":"",closable:!1}}),a("el-steps",{attrs:{active:+e.activeIndex,"align-center":"","finish-status":"success"}},[a("el-step",{attrs:{title:"基本信息"}}),a("el-step",{attrs:{title:"商品参数"}}),a("el-step",{attrs:{title:"商品属性"}}),a("el-step",{attrs:{title:"商品图片"}}),a("el-step",{attrs:{title:"商品内容"}}),a("el-step",{attrs:{title:"完成"}})],1),a("el-form",{ref:"addFormRef",attrs:{model:e.addForm,rules:e.addFormRules,size:"medium"}},[a("el-tabs",{attrs:{"tab-position":"left","before-leave":e.beforeTabLeave},on:{"tab-click":e.tabClicked},model:{value:e.activeIndex,callback:function(t){e.activeIndex=t},expression:"activeIndex"}},[a("el-tab-pane",{attrs:{label:"基本信息",name:"0"}},[a("el-form-item",{attrs:{label:"商品名称:",prop:"goods_name","label-width":"100px"}},[a("el-input",{model:{value:e.addForm.goods_name,callback:function(t){e.$set(e.addForm,"goods_name",t)},expression:"addForm.goods_name"}})],1),a("el-form-item",{attrs:{label:"商品价格:",prop:"goods_price","label-width":"100px"}},[a("el-input",{attrs:{type:"number"},model:{value:e.addForm.goods_price,callback:function(t){e.$set(e.addForm,"goods_price",t)},expression:"addForm.goods_price"}})],1),a("el-form-item",{attrs:{label:"商品重量:",prop:"goods_weight","label-width":"100px"}},[a("el-input",{attrs:{type:"number"},model:{value:e.addForm.goods_weight,callback:function(t){e.$set(e.addForm,"goods_weight",t)},expression:"addForm.goods_weight"}})],1),a("el-form-item",{attrs:{label:"商品数量:",prop:"goods_number","label-width":"100px"}},[a("el-input",{attrs:{type:"number"},model:{value:e.addForm.goods_number,callback:function(t){e.$set(e.addForm,"goods_number",t)},expression:"addForm.goods_number"}})],1),a("el-form-item",{attrs:{label:"商品分类:",prop:"goods_cat","label-width":"100px"}},[a("el-cascader",{attrs:{options:e.catelist,props:e.cateProps},on:{change:e.handleChange},model:{value:e.addForm.goods_cat,callback:function(t){e.$set(e.addForm,"goods_cat",t)},expression:"addForm.goods_cat"}})],1)],1),a("el-tab-pane",{attrs:{label:"商品参数",name:"1"}},e._l(e.manyTabData,(function(t){return a("el-form-item",{key:t.attr_id,attrs:{label:t.attr_name+":","label-width":"60px"}},[a("el-checkbox-group",{attrs:{size:"mini"},model:{value:t.attr_vals,callback:function(a){e.$set(t,"attr_vals",a)},expression:"item.attr_vals"}},e._l(t.attr_vals,(function(e,t){return a("el-checkbox",{key:t,attrs:{label:e,border:""}})})),1)],1)})),1),a("el-tab-pane",{attrs:{label:"商品属性",name:"2"}},e._l(e.onlyTabData,(function(t){return a("el-form-item",{key:t.attr_id,attrs:{label:t.attr_name+":","label-width":"160px"}},[a("el-input",{model:{value:t.attr_vals,callback:function(a){e.$set(t,"attr_vals",a)},expression:"item.attr_vals"}})],1)})),1),a("el-tab-pane",{attrs:{label:"商品图片",name:"3"}},[a("el-upload",{attrs:{action:e.uploadURL,"on-preview":e.handlePreview,"on-remove":e.handleRemove,"list-type":"picture",headers:e.headersObj,"on-success":e.handleSuccess}},[a("el-button",{attrs:{size:"small",type:"primary"}},[e._v("点击上传")])],1)],1),a("el-tab-pane",{attrs:{label:"商品内容",name:"4"}},[a("quill-editor",{model:{value:e.addForm.goods_introduce,callback:function(t){e.$set(e.addForm,"goods_introduce",t)},expression:"addForm.goods_introduce"}}),a("el-button",{staticClass:"addBtn",attrs:{type:"primary"},on:{click:e.addGoods}},[e._v("添加商品")])],1)],1)],1)],1),a("el-dialog",{attrs:{title:"图片预览",visible:e.previewVisible,width:"50%"},on:{"update:visible":function(t){e.previewVisible=t}}},[a("img",{attrs:{src:e.previewPath,alt:"",width:"100%"}})])],1)},fe=[],be=(a("c740"),a("5530")),he=(a("2ef0"),{name:"AddGoods",data:function(){return{activeIndex:"0",addForm:{goods_name:"",goods_price:0,goods_weight:0,goods_number:0,goods_cat:[],pics:[],goods_introduce:"",attrs:[]},addFormRules:{goods_name:[{required:!0,message:"请输入商品名称",trigger:"blur"}],goods_price:[{required:!0,message:"请输入商品价格",trigger:"blur"}],goods_weight:[{required:!0,message:"请输入商品重量",trigger:"blur"}],goods_number:[{required:!0,message:"请输入商品数量",trigger:"blur"}],goods_cat:[{required:!0,message:"请选择商品分类",trigger:"blur"}]},catelist:[],cateProps:{expandTrigger:"hover",value:"cat_id",label:"cat_name",children:"children"},manyTabData:[],onlyTabData:[],uploadURL:"http://127.0.0.1:8888/api/private/v1/upload",headersObj:{Authorization:window.sessionStorage.getItem("token")},previewPath:"",previewVisible:!1}},created:function(){this.getCateList()},methods:{getCateList:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("categories");case 2:if(a=t.sent,r=a.data,200===r.meta.status){t.next=6;break}return t.abrupt("return",e.$message.error(r.meta.msg));case 6:e.catelist=r.data;case 7:case"end":return t.stop()}}),t)})))()},handleChange:function(){3!==this.addForm.goods_cat.length&&(this.addForm.goods_cat=[])},beforeTabLeave:function(e,t){if("0"===t&&3!==this.addForm.goods_cat.length)return this.$message.error("请选择商品分类"),!1},tabClicked:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){var a,r,n,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if("1"!==e.activeIndex){t.next=11;break}return t.next=3,e.$http.get("categories/".concat(e.cateId,"/attributes"),{params:{sel:"many"}});case 3:if(a=t.sent,r=a.data,200===r.meta.status){t.next=7;break}return t.abrupt("return",e.$message.error(r.meta.msg));case 7:r.data.forEach((function(e){e.attr_vals=0===e.attr_vals.length?[]:e.attr_vals.split(",")})),e.manyTabData=r.data,t.next=19;break;case 11:if("2"!==e.activeIndex){t.next=19;break}return t.next=14,e.$http.get("categories/".concat(e.cateId,"/attributes"),{params:{sel:"only"}});case 14:if(n=t.sent,s=n.data,200===s.meta.status){t.next=18;break}return t.abrupt("return",e.$message.error(s.meta.msg));case 18:e.onlyTabData=s.data;case 19:case"end":return t.stop()}}),t)})))()},handlePreview:function(e){this.previewPath=e.response.data.url,this.previewVisible=!0},handleRemove:function(e){var t=e.response.data.tmp_path,a=this.addForm.pics.findIndex((function(e){return e.pic===t}));this.addForm.pics.splice(a,1)},handleSuccess:function(e){var t={pic:e.data.tmp_path};this.addForm.pics.push(t)},addGoods:function(){var e=this;this.$refs.addFormRef.validate(function(){var t=Object(g["a"])(regeneratorRuntime.mark((function t(a){var r,n,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a){t.next=2;break}return t.abrupt("return",e.$message.error("请填写必要的表单项"));case 2:return r=Object(be["a"])({},e.addForm),r.goods_cat=r.goods_cat.join(","),e.manyTabData.forEach((function(t){var a={attr_id:t.attr_id,attr_value:t.attr_vals.join(",")};e.addForm.attrs.push(a)})),e.onlyTabData.forEach((function(t){var a={attr_id:t.attr_id,attr_value:t.attr_vals};e.addForm.attrs.push(a)})),r.attrs=e.addForm.attrs,t.next=9,e.$http.post("goods",r);case 9:if(n=t.sent,s=n.data,201===s.meta.status){t.next=13;break}return t.abrupt("return",e.$message.error(s.meta.msg));case 13:e.$message.success(s.meta.msg),e.$router.push("/goods");case 15:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},computed:{cateId:function(){return 3===this.addForm.goods_cat.length?this.addForm.goods_cat[this.addForm.goods_cat.length-1]:null}}}),ve=he,we=(a("5685"),Object(l["a"])(ve,ge,fe,!1,null,"1257d1ef",null)),_e=we.exports;r["default"].use(d["a"]);var xe=[{path:"/",redirect:"/login"},{path:"/login",component:v},{path:"/home",component:R,redirect:"/welcome",children:[{path:"/welcome",component:V},{path:"/users",component:T},{path:"/rights",component:K},{path:"/roles",component:J},{path:"/categories",component:te},{path:"/params",component:oe},{path:"/goods",component:pe},{path:"/goods/add",component:_e}]}],ye=new d["a"]({routes:xe});ye.beforeEach((function(e,t,a){if("/login"===e.path)return a();var r=window.sessionStorage.getItem("token");if(!r)return a("/login");a()}));var ke=d["a"].prototype.push;d["a"].prototype.push=function(e){return ke.call(this,e).catch((function(e){return e}))};var Re=ye,$e=(a("1951"),a("450d"),a("eedf")),Fe=a.n($e),Ce=(a("425f"),a("4105")),De=a.n(Ce),Ie=(a("eca7"),a("3787")),Ve=a.n(Ie),je=(a("10cb"),a("f3ad")),Oe=a.n(je),Le=(a("adec"),a("3d2d")),qe=a.n(Le),ze=(a("a673"),a("7b31")),Te=a.n(ze),Se=(a("a769"),a("5cc3")),Pe=a.n(Se),Ne=(a("de31"),a("c69e")),Ee=a.n(Ne),Be=(a("4ca3"),a("443e")),Ke=a.n(Be),Ue=(a("ce18"),a("f58e")),Ge=a.n(Ue),Ae=(a("8bd8"),a("4cb2")),Me=a.n(Ae),He=(a("8f24"),a("76b9")),Ye=a.n(He),Je=(a("b84d"),a("c216")),Qe=a.n(Je),We=(a("b8e0"),a("a4c4")),Xe=a.n(We),Ze=(a("7a0f"),a("0f6c")),et=a.n(Ze),tt=(a("f4f9"),a("c2cc")),at=a.n(tt),rt=(a("38a0"),a("ad41")),nt=a.n(rt),st=(a("5466"),a("ecdf")),it=a.n(st),ot=(a("e960"),a("b35b")),lt=a.n(ot),ct=(a("0c67"),a("299c")),ut=a.n(ct),dt=(a("672e"),a("101e")),mt=a.n(dt),pt=(a("a7cc"),a("df33")),gt=a.n(pt),ft=(a("cbb5"),a("8bbc")),bt=a.n(ft),ht=(a("5e32"),a("6721")),vt=a.n(ht),wt=(a("1f1a"),a("4e4b")),_t=a.n(wt),xt=(a("6611"),a("e772")),yt=a.n(xt),kt=(a("28b2"),a("c7ad")),Rt=a.n(kt),$t=(a("915d"),a("e04d")),Ft=a.n($t),Ct=(a("075a"),a("72aa")),Dt=a.n(Ct),It=(a("e612"),a("dd87")),Vt=a.n(It),jt=(a("d2ac"),a("95b0")),Ot=a.n(jt),Lt=(a("9c49"),a("6640")),qt=a.n(Lt),zt=(a("e3ea"),a("7bc3")),Tt=a.n(zt),St=(a("d4df"),a("7fc1")),Pt=a.n(St),Nt=(a("560b"),a("dcdc")),Et=a.n(Nt),Bt=(a("f225"),a("89a9")),Kt=a.n(Bt),Ut=(a("9e1f"),a("6ed5")),Gt=a.n(Ut),At=(a("0fb7"),a("f529")),Mt=a.n(At);r["default"].prototype.$message=Mt.a,r["default"].prototype.$confirm=Gt.a.confirm,r["default"].use(Fe.a).use(De.a).use(Ve.a).use(Oe.a).use(qe.a).use(Te.a).use(Pe.a).use(Ee.a).use(Ke.a).use(Ge.a).use(Me.a).use(Ye.a).use(Qe.a).use(Xe.a).use(et.a).use(at.a).use(nt.a).use(it.a).use(lt.a).use(ut.a).use(mt.a).use(gt.a).use(bt.a).use(vt.a).use(_t.a).use(yt.a).use(Rt.a).use(Ft.a).use(Dt.a).use(Vt.a).use(Ot.a).use(qt.a).use(Tt.a).use(Pt.a).use(Et.a).use(Kt.a);a("aede"),a("82da");var Ht=a("bc3a"),Yt=a.n(Ht),Jt=a("d67e"),Qt=a.n(Jt),Wt=a("5a0c"),Xt=a.n(Wt),Zt=a("953d"),ea=a.n(Zt);a("a753"),a("8096"),a("14e1");Yt.a.defaults.baseURL="http://118.190.160.53:8089/api/private/v1/",Yt.a.interceptors.request.use((function(e){return e.headers.Authorization=window.sessionStorage.getItem("token"),e}),(function(e){return Promise.reject(e)})),r["default"].prototype.$http=Yt.a,r["default"].prototype.$dayjs=Xt.a,r["default"].config.productionTip=!1,r["default"].component("tree-table",Qt.a),r["default"].use(ea.a),new r["default"]({router:Re,render:function(e){return e(u)}}).$mount("#app")},"58ae":function(e,t,a){},"5bfa":function(e,t,a){e.exports=a.p+"img/heima.b5a855ee.png"},"6ee8":function(e,t,a){},"82da":function(e,t,a){},8421:function(e,t,a){},"895d":function(e,t,a){},a2e5:function(e,t,a){"use strict";var r=a("1a42"),n=a.n(r);n.a},a3b0:function(e,t,a){},aede:function(e,t,a){},b0f2:function(e,t,a){"use strict";var r=a("58ae"),n=a.n(r);n.a},cf05:function(e,t,a){e.exports=a.p+"img/logo.82b9c7a5.png"},d375:function(e,t,a){"use strict";var r=a("6ee8"),n=a.n(r);n.a},d532:function(e,t,a){},d68e:function(e,t,a){}});
//# sourceMappingURL=app.78a65dcf.js.map